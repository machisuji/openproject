<%#-- copyright
OpenProject is a project management system.

Copyright (C) 2012-2013 the OpenProject Team

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License version 3.

See doc/COPYRIGHT.rdoc for more details.

++#%>

<h2><%=l(:label_project_new)%></h2>

<%= labelled_tabular_form_for @project, :url => { :action => "copy" } do |f| %>
  <div class="copy box">
    <%= render :partial => 'projects/form/project_attributes', :locals => { :form => f, :project => @project } %>
    <%= render :partial => 'projects/form/timelines_attributes', :locals => { :form => f, :project => @project } %>
  </div>

  <fieldset class="copy box">
    <legend><%= l(:button_copy) %></legend>
    <%= render :partial => "projects/copy_settings/block_checkbox",
               :locals => { :name => "queries", :checked => true, :label => l(:label_query_plural),
                            :count => @source_project.queries.count } %>
    <%= render :partial => "projects/copy_settings/block_checkbox",
               :locals => { :name => "boards", :checked => false, :label => l(:label_board_plural),
                            :count => @source_project.boards.count } %>
    <%= render :partial => "projects/copy_settings/block_checkbox",
               :locals => { :name => "members", :checked => true, :label => l(:label_member_plural),
                            :count => @source_project.members.count } %>
    <%= render :partial => "projects/copy_settings/block_checkbox",
               :locals => { :name => "project_associations", :checked => true, :label => l(:label_reporting_plural),
                            :count => @source_project.project_associations.count } %>
    <%= render :partial => "projects/copy_settings/block_checkbox",
               :locals => { :name => "timelines", :checked => true, :label => l(:'timelines.timelines'),
                            :count => @source_project.timelines.count } %>
    <%= render :partial => "projects/copy_settings/block_checkbox",
               :locals => { :name => "versions", :checked => true, :label => l(:label_version_plural),
                            :count => @source_project.versions.count } %>
    <%= render :partial => "projects/copy_settings/block_checkbox",
               :locals => { :name => "wiki", :checked => true, :label => l(:label_wiki_page_plural),
                            :count => @source_project.wiki.nil? ? 0 : @source_project.wiki.pages.count } %>
    <%= render :partial => "projects/copy_settings/block_checkbox",
               :locals => { :name => "work_packages", :checked => false, :label => l(:label_work_package_plural),
                            :count => @source_project.work_packages.count } %>
    <%= render :partial => "projects/copy_settings/block_checkbox",
               :locals => { :name => "issue_categories", :checked => true,
                            :label => l(:label_work_package_category_plural),
                            :count => @source_project.issue_categories.count } %>

    <%= hidden_field_tag 'only[]', '' %>
    <br />
    <label class="block">
      <%= check_box_tag 'notifications', 1, params[:notifications] %>
      <%= l(:label_project_copy_notifications) %>
    </label>
  </fieldset>

  <%= submit_tag l(:button_copy) %>
<% end %>
